(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},4656,e=>{"use strict";var s=e.i(43476),a=e.i(29041),t=e.i(24338),l=e.i(29014),r=e.i(93963),i=e.i(71645),n=e.i(15288),c=e.i(87486),o=e.i(19455),d=e.i(93479),m=e.i(78894),x=e.i(69638),g=e.i(3116),h=e.i(73884),b=e.i(73264),u=e.i(70956),j=e.i(55436),v=e.i(15788),p=e.i(75157),f=e.i(15040),N=e.i(84774);function C(e){switch(e){case"overdue":return{label:"Atrasado",icon:h.XCircle,bgColor:"bg-purple-100",textColor:"text-purple-700",borderColor:"border-purple-200",cardBg:"bg-purple-50"};case"critical":return{label:"Crítico",icon:m.AlertTriangle,bgColor:"bg-red-100",textColor:"text-red-700",borderColor:"border-red-200",cardBg:"bg-red-50"};case"warning":return{label:"Atenção",icon:g.Clock,bgColor:"bg-amber-100",textColor:"text-amber-700",borderColor:"border-amber-200",cardBg:"bg-amber-50"};default:return{label:"Em dia",icon:x.CheckCircle,bgColor:"bg-green-100",textColor:"text-green-700",borderColor:"border-green-200",cardBg:"bg-green-50"}}}function y({percentage:e,status:a}){return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"h-2 w-full rounded-full bg-gray-200",children:(0,s.jsx)("div",{className:(0,p.cn)("h-2 rounded-full transition-all",(()=>{switch(a){case"overdue":return"bg-purple-500";case"critical":return"bg-red-500";case"warning":return"bg-amber-500";default:return"bg-green-500"}})()),style:{width:`${Math.min(e,100)}%`}})})})}function w({vehicle:e,onRefresh:a}){let l=C(e.revisionStatus),r=l.icon;return(0,s.jsx)(n.Card,{className:(0,p.cn)("overflow-hidden border-l-4 transition-shadow hover:shadow-md",l.borderColor),children:(0,s.jsxs)(n.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100",children:(0,s.jsx)(v.Truck,{className:"h-5 w-5 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900",children:e.PLACA}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.MARCA})]})]}),(0,s.jsxs)(c.Badge,{className:(0,p.cn)("flex items-center gap-1",l.bgColor,l.textColor),children:[(0,s.jsx)(r,{className:"h-3 w-3"}),l.label]})]}),(0,s.jsx)("p",{className:"mb-3 truncate text-sm text-gray-600",title:e.MODELO,children:e.MODELO}),(0,s.jsxs)("div",{className:"mb-3 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-gray-50 p-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Hodômetro"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:(0,t.formatKm)(e.HODOMETRO)})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-gray-50 p-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Última Revisão"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:(0,t.formatKm)(e.lastRevisionKm)})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-blue-50 p-2",children:[(0,s.jsx)("p",{className:"text-xs text-blue-600",children:"Próxima Revisão"}),(0,s.jsx)("p",{className:"font-semibold text-blue-700",children:(0,t.formatKm)(e.nextRevisionKm)}),(0,s.jsx)("p",{className:(0,p.cn)("text-xs font-medium mt-0.5","Completa"===e.nextRevisionType?"text-purple-600":"text-blue-500"),children:e.nextRevisionType})]}),(0,s.jsxs)("div",{className:(0,p.cn)("rounded-lg p-2",l.cardBg),children:[(0,s.jsx)("p",{className:(0,p.cn)("text-xs",l.textColor),children:"Km Restante"}),(0,s.jsx)("p",{className:(0,p.cn)("font-semibold",l.textColor),children:e.kmUntilRevision<=0?`${(0,t.formatKm)(Math.abs(e.kmUntilRevision))} atr\xe1s`:(0,t.formatKm)(e.kmUntilRevision)})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Ciclo de revisão"}),(0,s.jsxs)("span",{className:"font-medium text-gray-700",children:[e.revisionPercentage,"%"]})]}),(0,s.jsx)(y,{percentage:e.revisionPercentage,status:e.revisionStatus})]}),(0,s.jsx)(f.RevisionDialog,{vehicle:e,onSuccess:a})]})})}function R({vehicles:e,onRefresh:a}){let[t,l]=(0,i.useState)("card"),[r,c]=(0,i.useState)(""),m=(0,i.useMemo)(()=>{let s=r.toLowerCase().trim(),a=e;return s&&(a=e.filter(e=>e.PLACA.toLowerCase().includes(s)||e.MARCA.toLowerCase().includes(s)||e.MODELO.toLowerCase().includes(s)||e.TIPO.toLowerCase().includes(s))),[...a].sort((e,s)=>{let a={overdue:0,critical:1,warning:2,ok:3};return a[e.revisionStatus]!==a[s.revisionStatus]?a[e.revisionStatus]-a[s.revisionStatus]:e.kmUntilRevision-s.kmUntilRevision})},[e,r]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(j.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,s.jsx)(d.Input,{placeholder:"Pesquisar por placa, marca, modelo...",value:r,onChange:e=>c(e.target.value),className:"pl-9"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Visualização:"}),(0,s.jsxs)("div",{className:"flex rounded-lg border bg-white p-1",children:[(0,s.jsxs)(o.Button,{variant:"card"===t?"default":"ghost",size:"sm",onClick:()=>l("card"),className:(0,p.cn)("h-8 px-3","card"===t&&"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,s.jsx)(b.LayoutGrid,{className:"mr-1 h-4 w-4"}),"Cards"]}),(0,s.jsxs)(o.Button,{variant:"list"===t?"default":"ghost",size:"sm",onClick:()=>l("list"),className:(0,p.cn)("h-8 px-3","list"===t&&"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,s.jsx)(u.List,{className:"mr-1 h-4 w-4"}),"Lista"]})]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[m.length," veículo",1!==m.length?"s":""," encontrado",1!==m.length?"s":"",r&&` para "${r}"`]})}),0===m.length?(0,s.jsx)(n.Card,{className:"bg-white",children:(0,s.jsxs)(n.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(j.Search,{className:"mb-3 h-12 w-12 text-gray-300"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum veículo encontrado"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Tente ajustar os termos da pesquisa"})]})}):"card"===t?(0,s.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:m.map((e,t)=>(0,s.jsx)(w,{vehicle:e,onRefresh:a},`${e.PLACA}-${t}`))}):(0,s.jsx)(T,{vehicles:m,onRefresh:a})]})}function T({vehicles:e,onRefresh:a}){return(0,s.jsx)(n.Card,{className:"bg-white shadow-sm",children:(0,s.jsxs)(n.CardContent,{className:"p-0 sm:p-6",children:[(0,s.jsx)("div",{className:"space-y-3 p-4 sm:hidden",children:e.map((e,l)=>{let r=C(e.revisionStatus),i=r.icon;return(0,s.jsxs)("div",{className:(0,p.cn)("rounded-lg border-l-4 bg-gray-50 p-3",r.borderColor),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"font-bold text-gray-900",children:e.PLACA}),(0,s.jsxs)(c.Badge,{className:(0,p.cn)("flex items-center gap-1",r.bgColor,r.textColor),children:[(0,s.jsx)(i,{className:"h-3 w-3"}),r.label]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate mb-2",children:e.MODELO}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Hodômetro:"}),(0,s.jsx)("span",{className:"ml-1 font-medium text-gray-900",children:(0,t.formatKm)(e.HODOMETRO)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Próxima:"}),(0,s.jsx)("span",{className:"ml-1 font-medium text-blue-600",children:(0,t.formatKm)(e.nextRevisionKm)})]})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,s.jsx)("span",{className:(0,p.cn)("text-sm font-bold",e.kmUntilRevision<=0?"text-purple-600":e.kmUntilRevision<=2e3?"text-red-600":e.kmUntilRevision<=5e3?"text-amber-600":"text-green-600"),children:e.kmUntilRevision<=0?`${(0,t.formatKm)(Math.abs(e.kmUntilRevision))} atr\xe1s`:`${(0,t.formatKm)(e.kmUntilRevision)} restantes`}),(0,s.jsx)(f.RevisionDialog,{vehicle:e,onSuccess:a})]})]},`${e.PLACA}-${l}`)})}),(0,s.jsx)("div",{className:"hidden overflow-x-auto sm:block",children:(0,s.jsxs)(N.Table,{children:[(0,s.jsx)(N.TableHeader,{children:(0,s.jsxs)(N.TableRow,{className:"border-b border-gray-100",children:[(0,s.jsx)(N.TableHead,{className:"font-semibold text-gray-600",children:"Placa"}),(0,s.jsx)(N.TableHead,{className:"font-semibold text-gray-600",children:"Modelo"}),(0,s.jsx)(N.TableHead,{className:"font-semibold text-gray-600",children:"Marca"}),(0,s.jsx)(N.TableHead,{className:"text-right font-semibold text-gray-600",children:"Hodômetro"}),(0,s.jsx)(N.TableHead,{className:"text-right font-semibold text-gray-600",children:"Próxima Revisão"}),(0,s.jsx)(N.TableHead,{className:"text-right font-semibold text-gray-600",children:"Km Restante"}),(0,s.jsx)(N.TableHead,{className:"font-semibold text-gray-600",children:"Status"}),(0,s.jsx)(N.TableHead,{className:"font-semibold text-gray-600",children:"Ações"})]})}),(0,s.jsx)(N.TableBody,{children:e.map((e,l)=>{let r=C(e.revisionStatus),i=r.icon;return(0,s.jsxs)(N.TableRow,{className:"border-b border-gray-50 hover:bg-gray-50",children:[(0,s.jsx)(N.TableCell,{className:"font-medium text-gray-900",children:e.PLACA}),(0,s.jsx)(N.TableCell,{className:"max-w-[200px] truncate text-gray-600",children:e.MODELO}),(0,s.jsx)(N.TableCell,{className:"text-gray-600",children:e.MARCA}),(0,s.jsx)(N.TableCell,{className:"text-right font-medium text-gray-900",children:(0,t.formatKm)(e.HODOMETRO)}),(0,s.jsx)(N.TableCell,{className:"text-right font-medium text-blue-600",children:(0,s.jsxs)("div",{children:[(0,t.formatKm)(e.nextRevisionKm),(0,s.jsx)("span",{className:(0,p.cn)("ml-2 text-xs px-1.5 py-0.5 rounded","Completa"===e.nextRevisionType?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-600"),children:e.nextRevisionType})]})}),(0,s.jsx)(N.TableCell,{className:(0,p.cn)("text-right font-bold",e.kmUntilRevision<=0?"text-purple-600":e.kmUntilRevision<=2e3?"text-red-600":e.kmUntilRevision<=5e3?"text-amber-600":"text-green-600"),children:e.kmUntilRevision<=0?`${(0,t.formatKm)(Math.abs(e.kmUntilRevision))} atr\xe1s`:(0,t.formatKm)(e.kmUntilRevision)}),(0,s.jsx)(N.TableCell,{children:(0,s.jsxs)(c.Badge,{className:(0,p.cn)("flex w-fit items-center gap-1",r.bgColor,r.textColor),children:[(0,s.jsx)(i,{className:"h-3 w-3"}),r.label]})}),(0,s.jsx)(N.TableCell,{children:(0,s.jsx)(f.RevisionDialog,{vehicle:e,onSuccess:a})})]},`${e.PLACA}-${l}`)})})]})})]})})}var k=e.i(34272),A=e.i(95116),O=e.i(31278);function S(){let{vehiclesWithRevision:e,revisionConfigs:i,loading:c,refresh:o}=(0,a.useVehicles)(),d=(0,t.calculateRevisionStats)(e),b=(0,t.configsToFullIntervals)(i);return c?(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,s.jsx)(l.Sidebar,{vehicleCount:0}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col lg:ml-64",children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"flex flex-1 items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)(O.Loader2,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Carregando dados..."})]})})]})]}):(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,s.jsx)(l.Sidebar,{vehicleCount:d.totalVehicles}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col lg:ml-64",children:[(0,s.jsx)(r.Header,{}),(0,s.jsxs)("main",{className:"flex-1 overflow-x-hidden p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900 sm:text-2xl",children:"Gestão de Revisões"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 sm:text-base",children:"Acompanhe e gerencie as revisões programadas da sua frota"})]}),(0,s.jsxs)("div",{className:"mb-6 grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(k.StatsCard,{title:"Em Dia",value:(0,t.formatNumber)(d.ok),subtitle:"Fora da zona de atenção",icon:x.CheckCircle,iconColor:"text-green-600",iconBgColor:"bg-green-50"}),(0,s.jsx)(k.StatsCard,{title:"Atenção",value:(0,t.formatNumber)(d.warning),subtitle:"Próximos 5.000 km",icon:g.Clock,iconColor:"text-amber-600",iconBgColor:"bg-amber-50"}),(0,s.jsx)(k.StatsCard,{title:"Crítico",value:(0,t.formatNumber)(d.critical),subtitle:"Próximos 2.000 km",icon:m.AlertTriangle,iconColor:"text-red-600",iconBgColor:"bg-red-50"}),(0,s.jsx)(k.StatsCard,{title:"Atrasado",value:(0,t.formatNumber)(d.overdue),subtitle:"Passaram do prazo",icon:h.XCircle,iconColor:"text-purple-600",iconBgColor:"bg-purple-50"})]}),(0,s.jsxs)(n.Card,{className:"mb-6 bg-white shadow-sm",children:[(0,s.jsxs)(n.CardHeader,{className:"flex flex-row items-center gap-2 pb-4",children:[(0,s.jsx)(A.Wrench,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)(n.CardTitle,{className:"text-base font-semibold text-gray-900 sm:text-lg",children:"Intervalos de Revisão por Marca"})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:b.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.brand}),(0,s.jsx)("div",{className:"space-y-1",children:e.intervals.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e.name}),(0,s.jsxs)("span",{className:"font-semibold text-blue-600",children:[(e.interval/1e3).toFixed(0),"k km"]})]},a))})]},e.brand))})})]}),(0,s.jsx)(R,{vehicles:e,onRefresh:o})]})]})]})}e.s(["default",()=>S],4656)}]);