(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},84774,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function s({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function n({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function i({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function c({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>c,"TableHead",()=>i,"TableHeader",()=>s,"TableRow",()=>n])},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},87486,e=>{"use strict";var t=e.i(43476),a=e.i(25913),r=e.i(86011),s=e.i(75157);let l=(0,a.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a="default",asChild:n=!1,...i}){let c=n?r.Slot.Root:"span";return(0,t.jsx)(c,{"data-slot":"badge","data-variant":a,className:(0,s.cn)(l({variant:a}),e),...i})}e.s(["Badge",()=>n])},24338,34272,e=>{"use strict";function t(e){let t=new Map;return e.forEach(e=>{let a=t.get(e.brand)||[];a.push({name:e.revision_name,interval:e.interval_km}),t.set(e.brand,a)}),Array.from(t.entries()).map(([e,t])=>({brand:e,intervals:t.sort((e,t)=>e.interval-t.interval)}))}function a(e){let t=e.length,a=e.reduce((e,t)=>e+(t.HODOMETRO||0),0),r=t>0?Math.round(a/t):0,s={};e.forEach(e=>{let t=e.MARCA||"Outros";s[t]=(s[t]||0)+1});let l=Object.entries(s).map(([e,a])=>({name:e,value:a,percentage:Math.round(a/t*100)})).sort((e,t)=>t.value-e.value),n={};e.forEach(e=>{let t=e.TIPO||"Outros";n[t]=(n[t]||0)+1});let i=Object.entries(n).map(([e,a])=>({name:e,value:a,percentage:Math.round(a/t*100)})).sort((e,t)=>t.value-e.value);return{totalVehicles:t,totalKm:a,avgKm:r,byBrand:l,byType:i}}function r(e){let t=e.length,a=e.filter(e=>"overdue"===e.revisionStatus).length,r=e.filter(e=>"critical"===e.revisionStatus).length,s=e.filter(e=>"warning"===e.revisionStatus).length,l=e.filter(e=>"ok"===e.revisionStatus).length,n={};e.forEach(e=>{let t=e.MARCA||"Outros";n[t]=(n[t]||0)+1});let i=Object.entries(n).map(([e,a])=>({name:e,value:a,percentage:Math.round(a/t*100)})).sort((e,t)=>t.value-e.value),c=[{name:"Em dia",value:l,percentage:Math.round(l/t*100),color:"#10B981"},{name:"Atenção",value:s,percentage:Math.round(s/t*100),color:"#F59E0B"},{name:"Crítico",value:r,percentage:Math.round(r/t*100),color:"#EF4444"},{name:"Atrasado",value:a,percentage:Math.round(a/t*100),color:"#7C3AED"}].filter(e=>e.value>0);return{totalVehicles:t,overdue:a,critical:r,warning:s,ok:l,byBrand:i,byStatus:c}}function s(e){return new Intl.NumberFormat("pt-BR").format(e)}function l(e){return`${s(e)} km`}e.i(7471),e.s(["calculateRevisionStats",()=>r,"calculateStats",()=>a,"configsToFullIntervals",()=>t,"formatKm",()=>l,"formatNumber",()=>s],24338);var n=e.i(43476),i=e.i(15288),c=e.i(75157);function o({title:e,value:t,subtitle:a,icon:r,iconColor:s="text-blue-600",iconBgColor:l="bg-blue-50"}){return(0,n.jsx)(i.Card,{className:"bg-white shadow-sm",children:(0,n.jsx)(i.CardContent,{className:"p-4 sm:p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsxs)("div",{className:"min-w-0 flex-1 space-y-0.5 sm:space-y-1",children:[(0,n.jsx)("p",{className:"truncate text-xs font-medium text-gray-500 sm:text-sm",children:e}),(0,n.jsx)("p",{className:"truncate text-xl font-bold text-gray-900 sm:text-3xl",children:t}),(0,n.jsx)("p",{className:"truncate text-xs text-gray-400 sm:text-sm",children:a})]}),(0,n.jsx)("div",{className:(0,c.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-xl sm:h-12 sm:w-12",l),children:(0,n.jsx)(r,{className:(0,c.cn)("h-5 w-5 sm:h-6 sm:w-6",s)})})]})})})}e.s(["StatsCard",()=>o],34272)},50887,e=>{"use strict";var t=e.i(43476),a=e.i(29041),r=e.i(24338),s=e.i(29014),l=e.i(93963),n=e.i(84774),i=e.i(87486),c=e.i(15288),o=e.i(15788);function d(e){return e>=5e5?{label:"Alta",variant:"destructive"}:e>=3e5?{label:"Média",variant:"secondary"}:{label:"Normal",variant:"default"}}function m({vehicles:e}){return(0,t.jsxs)(c.Card,{className:"bg-white shadow-sm",children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center gap-2 pb-4",children:[(0,t.jsx)(o.Truck,{className:"h-5 w-5 shrink-0 text-blue-600"}),(0,t.jsx)(c.CardTitle,{className:"text-base font-semibold text-gray-900 sm:text-lg",children:"Frota de Veículos"})]}),(0,t.jsxs)(c.CardContent,{className:"p-0 sm:p-6 sm:pt-0",children:[(0,t.jsx)("div",{className:"space-y-3 p-4 sm:hidden",children:e.map((e,a)=>{let s=d(e.HODOMETRO);return(0,t.jsxs)("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-bold text-gray-900",children:e.PLACA}),(0,t.jsx)(i.Badge,{variant:s.variant,children:s.label})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 truncate mb-1",children:e.MODELO}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[e.MARCA," · ",e.TIPO]}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:(0,r.formatKm)(e.HODOMETRO)})]})]},`${e.PLACA}-${a}`)})}),(0,t.jsx)("div",{className:"hidden overflow-x-auto sm:block",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"border-b border-gray-100",children:[(0,t.jsx)(n.TableHead,{className:"font-semibold text-gray-600",children:"Placa"}),(0,t.jsx)(n.TableHead,{className:"font-semibold text-gray-600",children:"Modelo"}),(0,t.jsx)(n.TableHead,{className:"font-semibold text-gray-600",children:"Tipo"}),(0,t.jsx)(n.TableHead,{className:"font-semibold text-gray-600",children:"Marca"}),(0,t.jsx)(n.TableHead,{className:"text-right font-semibold text-gray-600",children:"Hodômetro"}),(0,t.jsx)(n.TableHead,{className:"font-semibold text-gray-600",children:"Status"})]})}),(0,t.jsx)(n.TableBody,{children:e.map((e,a)=>{let s=d(e.HODOMETRO);return(0,t.jsxs)(n.TableRow,{className:"border-b border-gray-50 hover:bg-gray-50",children:[(0,t.jsx)(n.TableCell,{className:"font-medium text-gray-900",children:e.PLACA}),(0,t.jsx)(n.TableCell,{className:"max-w-[200px] truncate text-gray-600",children:e.MODELO}),(0,t.jsx)(n.TableCell,{className:"text-gray-600",children:e.TIPO}),(0,t.jsx)(n.TableCell,{className:"text-gray-600",children:e.MARCA}),(0,t.jsx)(n.TableCell,{className:"text-right font-medium text-gray-900",children:(0,r.formatKm)(e.HODOMETRO)}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(i.Badge,{variant:s.variant,children:s.label})})]},`${e.PLACA}-${a}`)})})]})})]})]})}var u=e.i(34272),x=e.i(94827),b=e.i(78894),h=e.i(95116),g=e.i(31278);function f(){let{vehicles:e,vehiclesWithRevision:n,loading:i,error:c}=(0,a.useVehicles)(),d=(0,r.calculateRevisionStats)(n),f=(0,r.calculateStats)(e);return i?(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(s.Sidebar,{vehicleCount:0}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col lg:ml-64",children:[(0,t.jsx)(l.Header,{}),(0,t.jsx)("main",{className:"flex flex-1 items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Carregando dados..."})]})})]})]}):(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(s.Sidebar,{vehicleCount:f.totalVehicles}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col lg:ml-64",children:[(0,t.jsx)(l.Header,{}),(0,t.jsxs)("main",{className:"flex-1 overflow-x-hidden p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 sm:text-2xl",children:"Frota de Veículos"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 sm:text-base",children:"Visualize todos os veículos da sua frota"})]}),(0,t.jsxs)("div",{className:"mb-6 grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(u.StatsCard,{title:"Total de Veículos",value:(0,r.formatNumber)(f.totalVehicles),subtitle:"Veículos ativos",icon:o.Truck,iconColor:"text-blue-600",iconBgColor:"bg-blue-50"}),(0,t.jsx)(u.StatsCard,{title:"Km Médio",value:(0,r.formatKm)(f.avgKm),subtitle:"Média da frota",icon:x.Gauge,iconColor:"text-green-600",iconBgColor:"bg-green-50"}),(0,t.jsx)(u.StatsCard,{title:"Revisões Críticas",value:(0,r.formatNumber)(d.critical+d.overdue),subtitle:"Precisam de atenção",icon:b.AlertTriangle,iconColor:"text-red-600",iconBgColor:"bg-red-50"}),(0,t.jsx)(u.StatsCard,{title:"Em Dia",value:(0,r.formatNumber)(d.ok),subtitle:"Sem revisão pendente",icon:h.Wrench,iconColor:"text-green-600",iconBgColor:"bg-green-50"})]}),(0,t.jsx)(m,{vehicles:e})]})]})]})}e.s(["default",()=>f],50887)}]);